import{r as B,g as S}from"./react-vendor-DJG_os-6.js";import{r as C}from"./mapbox-gl-DihW3SZk.js";var p={exports:{}},f={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w;function P(){if(w)return f;w=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function a(n,s,l){var i=null;if(l!==void 0&&(i=""+l),s.key!==void 0&&(i=""+s.key),"key"in s){l={};for(var u in s)u!=="key"&&(l[u]=s[u])}else l=s;return s=l.ref,{$$typeof:r,type:n,key:i,ref:s!==void 0?s:null,props:l}}return f.Fragment=e,f.jsx=a,f.jsxs=a,f}var y;function T(){return y||(y=1,p.exports=P()),p.exports}var t=T(),o=B(),A=C();const d=S(A),$=({onToggleLayer:r,isActive:e})=>t.jsx("button",{onClick:r,className:`z-10 rounded-full p-2  transition-colors ${e?"bg-teal-600":"bg-[#0BB4AA]"}`,children:t.jsx("img",{src:"/map.png",alt:"Toggle Play Area",className:"p-2.5 sm:p-3 h-10 sm:w-12 sm:h-12 md:w-12  md:h-12 object-contain"})}),q=({onToggleLayer:r,isActive:e})=>t.jsx("div",{className:"absolute top-3 left-4 z-10",children:t.jsx($,{onToggleLayer:r,isActive:e})}),z=({map:r,location:e,onClick:a})=>{const n=o.useRef(null);return o.useEffect(()=>{if(!r||!e.name||!e.img)return;const s=document.createElement("div");return s.className="beach-marker",s.addEventListener("click",()=>a(e)),n.current=new d.Marker({element:s,anchor:"center"}).setLngLat(e.lngLat).addTo(r),()=>{n.current&&(n.current.remove(),n.current=null)}},[r,e,a]),null},F=({map:r,location:e,onClick:a})=>{const n=o.useRef(null);return o.useEffect(()=>{if(!r||!e.name||!e.img)return;const s=document.createElement("div");return s.className="landmark-marker",s.addEventListener("click",()=>a(e)),n.current=new d.Marker({element:s,anchor:"center"}).setLngLat(e.lngLat).addTo(r),()=>{n.current&&(n.current.remove(),n.current=null),s.removeEventListener("click",()=>a(e))}},[r,e,a]),null},I=({map:r,location:e})=>(o.useEffect(()=>{if(!r)return;const a=document.createElement("div");a.className="warning-marker";const n=new d.Marker(a).setLngLat(e.lngLat).addTo(r);return()=>{n.remove()}},[r,e]),null),J=({map:r,location:e})=>(o.useEffect(()=>{if(!r)return;const a=document.createElement("div");a.className="hq-marker";const n=new d.Marker(a).setLngLat(e.lngLat).addTo(r);return()=>{n.remove()}},[r,e]),null),_=({landmark:r,onClose:e})=>{const a=o.useRef(null);return o.useEffect(()=>{const n=s=>{a.current&&!a.current.contains(s.target)&&e()};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e]),!r.name||!r.img?null:t.jsx("div",{className:"fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 p-6",children:t.jsxs("div",{ref:a,className:"bg-white rounded-lg shadow-xl w-full max-w-md sm:max-w-lg md:max-w-xl mx-2 sm:mx-6 p-6 sm:p-8 flex flex-col h-[75vh] sm:h-[85vh] max-h-[85vh]",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl font-montserrat font-semibold text-gray-800",children:r.name}),t.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:t.jsx("svg",{className:"w-6 h-6 sm:w-7 sm:h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("img",{src:r.img,alt:r.name,className:"w-full h-[50vh] sm:h-[55vh] md:h-[60vh] object-cover rounded-md mb-4 flex-grow"}),t.jsx("button",{onClick:e,className:"w-full md:w-24 bg-teal-600 text-white font-montserrat py-2 sm:py-3 rounded-md hover:bg-teal-700 transition-colors",children:"Close"})]})})},O=({map:r,location:e})=>{const a=o.useRef(null);return o.useEffect(()=>{if(!r)return;const n=document.createElement("div");return n.className="anchorage-marker",a.current=new d.Marker({element:n,anchor:"center"}).setLngLat(e.lngLat).addTo(r),()=>{a.current&&(a.current.remove(),a.current=null)}},[r,e]),null},G=({map:r,isVisible:e,zoom:a,paths:n})=>(o.useEffect(()=>{if(!(!r||e||a<12))return n.forEach((s,l)=>{const i=`sea-path-${l}`,u=`sea-path-layer-${l}`;r.getSource(i)||(r.addSource(i,{type:"geojson",data:{type:"Feature",geometry:{type:"LineString",coordinates:s},properties:{}}}),r.addLayer({id:u,type:"line",source:i,layout:{"line-join":"miter","line-cap":"square"},paint:{"line-color":"#9684D8","line-width":20,"line-opacity":.2}}))}),()=>{n.forEach((s,l)=>{const i=`sea-path-${l}`,u=`sea-path-layer-${l}`;r.getLayer(u)&&r.removeLayer(u),r.getSource(i)&&r.removeSource(i)})}},[r,e,a,n]),null),b=()=>t.jsx("div",{className:"fixed inset-0 bg-[#ffffff] flex items-center justify-center z-[100] transition-opacity duration-500",children:t.jsxs("div",{className:"abstract-loader",children:[t.jsx("div",{className:"wave wave-1"}),t.jsx("div",{className:"wave wave-2"}),t.jsx("div",{className:"wave wave-3"})]})}),H=[{name:"Kanoula Beach",img:"/Kanoula.jpg",lngLat:[20.075605,39.371323]},{name:"Papanikolis Cave",img:"/papanikolis.jpg",lngLat:[20.217499,39.399461]},{name:"Bella Vraka Beach",img:"/bella.jpg",lngLat:[20.235556,39.399386]},{name:"Pisina Beach",img:"/pisina.jpg",lngLat:[20.219699,39.403726]},{name:"Voutoumi Beach",img:"/voutoumi.jpg",lngLat:[20.227327,39.157765]},{name:"Monodendri Beach",img:"/monodendri.jpg",lngLat:[20.151747,39.231144]},{name:"Kipiadi Beach",img:"/kipiadi.jpg",lngLat:[20.168973,39.217528]},{name:"Harami Beach",img:"/harami.jpg",lngLat:[20.13132,39.235916]},{name:"Kavos Beach",img:"/kavos.jpg",lngLat:[20.114293,39.386624]},{name:"Bouka Beach",img:"/mpouka.jpg",lngLat:[20.086849,39.433575]},{name:"Notos Beach",img:"/notos.jpg",lngLat:[20.00384,39.448356]},{name:"Arkoudilas Beach",img:"/arkoudilas.jpg",lngLat:[20.101,39.366388]},{name:"Marathias Beach",img:"/marathias.jpg",lngLat:[19.983986,39.414223]},{name:"Lefkimmi",img:"/lefk.jpg",lngLat:[20.096971,39.415188]},{name:"Seitan Limani",img:"/seitan.jpg",lngLat:[24.193246,35.551554]},{name:"Kamares",img:"/kamares.png",lngLat:[24.18528,35.52053]},{name:"Marathi",img:"/marathi.jpg",lngLat:[24.173575,35.504575]},{name:"Loutraki",img:"/loutraki.jpg",lngLat:[24.163951,35.499177]},{name:"Souda Isle",img:"/souda.jpg",lngLat:[24.153416,35.489883]},{name:"Saint John",img:"/aigiannis.jpg",lngLat:[24.124855,35.470182]},{name:"Omprogialos",img:"/obrogialos.jpg",lngLat:[24.258612,35.425301]}],Z=[{name:"Sivota",img:"/sivot.jpg",lngLat:[20.235937,39.407915]},{name:"Paxoi",img:"/paxos.jpg",lngLat:[20.188193,39.199735]},{name:"Corfu City",img:"/corfu.jpeg",lngLat:[19.92446,39.626376]}],D=[{lngLat:[20.225197,39.398572]},{lngLat:[20.235161,39.399938]},{lngLat:[20.241787,39.396721]},{lngLat:[20.213326,39.446123]},{lngLat:[20.070584,39.46504]}],V=[{lngLat:[20.119202,39.382266]},{lngLat:[19.896682,39.630671]},{lngLat:[24.203508,35.450493]}],Y=[{lngLat:[20.224354,39.402483]},{lngLat:[20.219571,39.404198]},{lngLat:[20.100163,39.365321]},{lngLat:[20.004768,39.448326]},{lngLat:[19.868421,39.71585]},{lngLat:[19.895639,39.63073]},{lngLat:[20.119805,39.382366]},{lngLat:[24.186436,35.520131]},{lngLat:[24.173197,35.504363]},{lngLat:[24.164359,35.499159]},{lngLat:[24.258483,35.425904]}],U=[[[20.127884,39.382641],[20.207513,39.400821]],[[19.897214,39.636832],[19.879759,39.710945]]],W=()=>{const r=o.useRef(null),e=o.useRef(null),[a,n]=o.useState(!1),[s,l]=o.useState(null),[i,u]=o.useState(7),[h,x]=o.useState(null),[L,E]=o.useState(!1),j=o.useCallback(c=>{x(c)},[]);o.useEffect(()=>{var k;if(!r.current)return;const c="pk.eyJ1Ijoia29zdGFzZ2FsbCIsImEiOiJjbHNsc2l4ODkwZGY4MmtxOWN6bHZlOXlyIn0.zhJmY7vfnaDLo-gf5X2P3g",v=((k=new URLSearchParams(window.location.search).get("location"))==null?void 0:k.toLowerCase())||"corfu",M=v==="corfu"?[19.921,39.62]:[24.173947,35.448988],R=v==="corfu"?8.5:10;try{d.accessToken=c,e.current=new d.Map({container:r.current,style:"mapbox://styles/kostasgall/clsn4k2s800mx01qx596u4sur",center:M,zoom:R}),e.current.addControl(new d.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0})),e.current.on("zoom",()=>{e.current&&u(e.current.getZoom())}),e.current.on("load",()=>{if(e.current)try{e.current.addSource("area",{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:[[[20.070584,39.46504],[20.124893,39.380089],[20.109444,39.35368],[20.00104,39.396607],[19.966192,39.41881],[19.911389,39.428536],[20.075111,39.318628],[20.277801,39.375943],[20.263038,39.390803],[20.240378,39.396109],[20.232439,39.410833],[20.202141,39.449185],[20.022978,39.675611],[19.886082,39.716956],[19.869101,39.655537],[19.943041,39.630016],[19.951588,39.477597],[19.999065,39.461776],[20.021038,39.437386],[20.04241,39.440634],[20.070584,39.46504]]]},properties:{}}}),e.current.addLayer({id:"PlayArea",type:"line",source:"area",layout:{"line-join":"round","line-cap":"round",visibility:"none"},paint:{"line-color":"#84949e","line-width":2}}),E(!0),console.log("Map loaded successfully")}catch(g){l("Failed to load map data"),console.error("Error in map load event:",g)}}),e.current.on("error",g=>{l("Mapbox error occurred"),console.error("Mapbox error:",g)})}catch(g){l("Failed to initialize Mapbox"),console.error("Mapbox initialization error:",g)}return()=>{e.current&&(e.current.remove(),e.current=null)}},[]);const N=()=>{if(!e.current)return;const c=a?"none":"visible";e.current.setLayoutProperty("PlayArea","visibility",c),n(!a)};return s?t.jsx("div",{className:"text-red-500 p-4 font-montserrat",children:s}):t.jsxs(t.Fragment,{children:[!L&&t.jsx(b,{}),t.jsx(q,{onToggleLayer:N,isActive:a}),t.jsx("div",{ref:r,className:"absolute inset-0 w-full h-full"}),L&&t.jsxs(t.Fragment,{children:[i>=9&&H.map((c,m)=>t.jsx(z,{map:e.current,location:c,onClick:j},`beach-${m}`)),Z.map((c,m)=>t.jsx(F,{map:e.current,location:c,onClick:j},`landmark-${m}`)),i>=12&&D.map((c,m)=>t.jsx(I,{map:e.current,location:c},`warning-${m}`)),i>15&&Y.map((c,m)=>t.jsx(O,{map:e.current,location:c},`anchorage-${m}`)),V.map((c,m)=>t.jsx(J,{map:e.current,location:c},`hq-${m}`)),t.jsx(G,{map:e.current,isVisible:a,zoom:i,paths:U})]}),h&&t.jsx(_,{landmark:h,onClose:()=>x(null)})]})},X=()=>t.jsx("div",{className:"absolute top-3 w-full flex justify-center",children:t.jsx("a",{href:"https://blue-bliss.gr/",target:"_blank",rel:"noopener noreferrer",className:" bg-[#0bb4aa] rounded-[25px] w-[30vw] sm:w-[20vw] md:w-[10vw]",children:t.jsx("img",{src:"/logo-map.png",alt:"Blue Bliss Logo",className:"w-full py-1"})})}),ee=()=>{const[r,e]=o.useState(!1);return o.useEffect(()=>{const a=setTimeout(()=>{e(!0)},1200);return()=>clearTimeout(a)},[]),t.jsxs("div",{className:" relative w-full h-screen",children:[!r&&t.jsx(b,{}),t.jsx(W,{}),t.jsx(X,{})]})};export{ee as A,t as j,o as r};
